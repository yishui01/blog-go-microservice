syntax = "proto3";
import "github.com/gogo/protobuf/gogoproto/gogo.proto";
import "google/protobuf/empty.proto";
import "google/api/annotations.proto";


package article.service.v1;

message ArtListRequest {
     int64 page = 1 [(gogoproto.moretags) = 'form:"page"' ];
     int64 size = 2 [(gogoproto.moretags) = 'form:"size"'];
     string keyword = 3 [(gogoproto.moretags) = 'form:"keyword"'];
}

message ArtListResp {
    int64 total=1;
    repeated ArtDetailResp lists = 2;
    int64 page = 3 [(gogoproto.moretags) = 'form:"page"' ];
    int64 size = 4 [(gogoproto.moretags) = 'form:"size"'];
}

message ArtDetailRequest {
    string sn = 1 [(gogoproto.moretags) = 'form:"sn" validate:"required"'];
    int64 status = 2 [(gogoproto.moretags) = 'form:"status" validate:"required"'];
}

message ArtDetailResp {
    int64  id      = 1;
    string sn      = 2 [(gogoproto.moretags) = 'form:"sn" validate:"required"'];
    string title   = 3;
    string img     = 4;
    string content = 5;
    int64  status  = 6;
    string created_at = 7;
    string updated_at = 8;
    string deleted_at = 9;
    string tags    = 10;
}

message SaveArtReq {
    int64  id      = 1;
    string sn      = 2 [(gogoproto.moretags) = 'form:"name" validate:"required"'];
    string title   = 3;
    string img     = 4;
    string content = 5;
    int64  status  = 6;
    string created_at = 7;
    string updated_at = 8;
    string deleted_at = 9;
    string tags    = 10;
}

message SaveArtResp {
    int64 status      = 1;
    string data       = 2;
    string msg        = 3;
}

message DelArtRequest {
    string sn = 1 [(gogoproto.moretags) = 'form:"name" validate:"required"'];
    bool   physical = 2 [(gogoproto.moretags) = 'form:"physical" validate:"required"']; //是否为物理删除，false为软删除
}



service Article {
    rpc Ping(.google.protobuf.Empty) returns (.google.protobuf.Empty);

    rpc ArtList(ArtListRequest)returns(ArtListResp){
        option(google.api.http) = {
            get:"/article"
        };
    }
    rpc GetArtBySn(ArtDetailRequest) returns (ArtDetailResp){
        option(google.api.http) = {
            get:"/article/sn/{sn}/status/{status}"
        };
    };
    rpc SaveArt(SaveArtReq) returns (SaveArtResp){
        option(google.api.http) = {
            post:"/article/save"
            body:"*"
        };
    };
    rpc DeleteArt(DelArtRequest) returns (SaveArtResp){
        option(google.api.http) = {
            post:"/article/sn/{sn}/physical/{physical}"
        };
    };
}